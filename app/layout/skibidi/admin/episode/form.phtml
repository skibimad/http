<?php
$episode = $this('episode')
?>
<div class="admin-header">
    <h1 class="admin-title">Episode</h1>
    <a class="btn btn-primary" onclick="history.back()">Back</a>
</div>

<div class="form-container">
    <div class="form-card">

        <form method="post" action="/admin/episode/<?= $episode['id'] ? 'update' : 'put' ?> " enctype="multipart/form-data" class="episode-form">
            <input type="hidden" name="episode[id]" value=<?= $episode['id'] ?>>
            <div class="form-group">
                <label for="episode-title">Episode Title</label>
                <input value="<?= $this('episode')['title'] ?> " type="text" id="episode-title" name="episode[title]" placeholder="Enter your episode title" required>
            </div>
            <div class="form-group">
                <label for="episode-video-url">Youtube URL</label>
                <input value="<?= $this('episode')['video_url'] ?> " type="text" id="episode-video-url" name="episode[video_url]" placeholder="Youtube URL" required>
            </div>

            <div class="form-group">
                <label for="episode-image">Thumbnail</label>
                 <?php if ($this('episode')['image']):?>
                    <img height="100px" src="/<?= htmlspecialchars(trim($this('episode')['image'], '/')) ?>" alt="<?= htmlspecialchars($episode['title']) ?>" class="card-image">
                 <?php endif;?>
                <div class="file-upload-wrapper">
                    <input type="file" id="episode-image" name="thumbnail" accept="image/*" class="file-input">
                    <div class="file-upload-area">
                        <div class="upload-icon">üìÅ</div>
                        <p class="upload-text">Click to upload or drag and drop</p>
                        <p class="upload-subtext">PNG, JPG, GIF up to 5MB</p>
                    </div>
                    <div class="file-preview hidden">
                        <img class="preview-image" src="" alt="Preview">
                        <button type="button" class="remove-file">√ó</button>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="episode-description">Description</label>
                <textarea id="episode-description" name="episode[description]" class="summernote-editor" placeholder="Write your episode content here..."><?=htmlspecialchars($episode['description'] ?? '', ENT_QUOTES, 'UTF-8')?></textarea>
            </div>
            <div class="form-group">
                <label for="episode-active">Active</label>
                <select id="episode-active" name="episode[status]" required>
                    <option value="1" <?= $episode['status'] ? 'selected' : '' ?>>Yes</option>
                    <option value="0" <?= !$episode['status'] ? 'selected' : '' ?>>No</option>
                </select>
            </div>

            <button type="submit" class="submit-btn">
                Save
            </button>
        </form>
    </div>
</div>
