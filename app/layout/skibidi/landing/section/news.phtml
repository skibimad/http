<?php
/** @var Fasty\Model\CollectionInterface $recentPosts */
$recentPosts = $this('blogPosts');
?>
<section id="blog" class="blog-preview-section">
    <div class="container">
        <h2 class="section-title">Latest News</h2>
        <p class="section-subtitle">
            Stay updated with the latest news, behind-the-scenes content, and announcements
        </p>

        <div class="blog-grid">
            <?php if (!empty($recentPosts)): ?>
                <?php foreach ($recentPosts as $post): ?>
                    <div class="blog-card">
                        <div class="flex tooltipable">
                            <img loading="lazy" height="200px" class="tooltip-content blog-card-image" src="/<?= htmlspecialchars(trim($post['image'], '/')) ?>" alt="<?= htmlspecialchars($post['title']) ?>">
                        </div>
                        <div class="blog-card-content">
                            <h3 class="blog-card-title"><?= htmlspecialchars($post['title']) ?></h3>
                            <div class="blog-card-meta">
                                <?= htmlspecialchars($post['author']) ?> â€¢ <?= date('F j, Y', strtotime($post['published_at'])) ?>
                            </div>
                            <p class="blog-card-excerpt"><?= htmlspecialchars(substr(strip_tags($post['content']), 0, 150) . '...') ?></p>

                            <a href="/blog/#<?= htmlspecialchars($post->getAnchor()) ?>" class="btn btn-primary read-more-link g-tag" data-gtag="blog_post_read" data-gtag-section="news" data-gtag-post-title="<?= htmlspecialchars($post['title'], ENT_QUOTES, 'UTF-8') ?>">Read More</a>

                        </div>
                    </div>
                <?php endforeach; ?>
            <?php endif; ?>
        </div>

        <div class="blog-view-all">
            <a href="/blog" class="btn btn-primary g-tag" data-gtag="blog_view_all" data-gtag-section="news">View All Posts</a>
        </div>
    </div>
</section>