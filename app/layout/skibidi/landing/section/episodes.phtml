<?php
/** @var Fasty\Model\CollectionInterface $episodes */
$episodes = $this('episodes');
?>
<section id="videos" class="videos-section">
    <div class="container">
        <h2 class="section-title"><?= htmlspecialchars($this('getLandingContent')('episodes', 'title')) ?></h2>
        <p class="section-subtitle">
            <?= $this('getLandingContent')('episodes', 'subtitle') ?>
        </p>

        <div class="videos-grid">
            <?php foreach ($episodes as $episode): ?>
                <div class="video-card">
                    <div class="video-thumbnail">
                        <img loading="lazy" src="<?= htmlspecialchars($episode['thumbnail'] ? $episode['thumbnail'] : '/pub/media/img/default-video-thumbnail.png') ?>" alt="Episode Preview">
                        <a href="/youclick?y=<?= $episode->getVideoUrl() ?>" target="_blank" class="play-button g-tag" data-gtag="video_click" data-gtag-section="episodes" data-gtag-video-title="<?= htmlspecialchars('Episode ' . $episode['episode_number'] . ': ' . $episode['title'], ENT_QUOTES, 'UTF-8') ?>">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 5v14l11-7z" />
                            </svg>
                        </a>
                    </div>
                    <div class="video-info">
                        <h3>Episode <?= $episode['episode_number'] ?>: <?= htmlspecialchars($episode['title']) ?></h3>
                        <p><?= nl2br($episode['description']) ?></p>
                    </div>
                </div>
            <?php endforeach; ?>
        </div>
    </div>
</section>